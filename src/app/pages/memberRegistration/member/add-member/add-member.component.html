
    
    <div class="container-fluid">

        <!-- start page title -->
        <!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                    <h4 class="mb-sm-0 font-size-18">Member</h4>

                    <div class="page-title-right">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item">Member</li>
                            <li class="breadcrumb-item active"><a href="javascript: void(0);"routerLink="/view-member">View list</a></li>
                        </ol>
                    </div>

                </div>
            </div>
        </div>
        <!-- end page title -->
      <div style="background-color: white;padding: 20px;">
        <div style="background-color:white;padding:1%;padding-bottom:4%">
            <div *ngIf="isDisconnected==true" class="alert alert-light" style="height:1%">
                    <!--connection status starts here-->
                <label text-wrap><i class="fa fa-wifi" aria-hidden="true"></i>Please check your connection and try again <button class="btn btn-primary" (click)="Reload()"><i class="fa fa-refresh" aria-hidden="true"></i>&nbsp;Refresh</button></label>
            </div>
            <div *ngIf="isValid==false">
            <div class="btn btn-danger"><i class="fa fa-exclamation-triangle"></i> Please fill required Fields</div> </div> 
            <mat-tab-group [selectedIndex]="selectedIndex" style="padding-bottom:2%;">
              <mat-tab label="General Information ">
                <div class="row" style="margin:2px"> 
                    <div class="col-md-4">
                      <div class="mb-3"> 
                        <label>Member No.</label>                        
                          <input class="form-control" [(ngModel)]="MemberNo" readonly>                       
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Payroll Number</label>                     
                        <input class="form-control" [(ngModel)]="Payroll">                      
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">   
                    <label>Registration Date</label>                    
                      <input type="date"  [(ngModel)]="RegistrationDate" class="form-control">                  
                   </div>
                  </div> 
                  </div>
                  <div class="row" style="margin:2px">
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Full Name<strong style="color:red">*</strong></label>                      
                        <input class="form-control" [(ngModel)]="FullName" [class.is-invalid]="!isValid && FullName==''" (keyup)="onInput()">                      
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3"> 
                    <label>Search Name</label>                    
                    <input class="form-control" [(ngModel)]="SearchName"
                  >                   
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3"> 
                    <label>Nationality<strong style="color:red">*</strong></label>                   
                    <select class="form-select" [(ngModel)]="NationalityId" >
                      <option value="0">Kenyan</option>
                      <option *ngFor="let items of NationalityList" value="{{items.NationalityId}}">{{items.NationalityName}}</option>
                    </select>                   
                  </div>
                </div> 
                </div>
              <div class="row" style="margin:2px">
                <div class="col-md-4">
                  <div class="mb-3"> 
                    <label> Member Status</label>                     
                      <select class="form-select" [(ngModel)]="MemberStatusId" >
                      <option value="0">-select</option>
                        <option *ngFor="let items of MemberStatusList" value="{{items.MemberStatusId}}">{{items.MemberStatusName}}</option>
                      </select>
                    </div>
                   </div>
              <div class="col-md-4"> 
                <div class="mt-5">                
                  <label ></label>                 
                    <input type="checkbox" [(ngModel)]="IsPerson" > &nbsp;<label style="color:red">Is Person</label>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <label></label>                      
                    <input type="checkbox" [(ngModel)]="Blocked" > &nbsp;<label>Blocked</label>
                  </div>  

                  
                </div>          
               <div class="col-md-4">
                <div class="mb-3"> 
                  <label>Branch<strong style="color:red">*</strong></label>                     
                    <select class="form-select" [(ngModel)]="MemberOutletId" >
                    <option value="0">-select</option>
                      <option *ngFor="let items of CompanyOutletList" value="{{items.OutletId}}">{{items.OutletName}}</option>
                    </select>
                  </div>

                 </div> 
              </div>
              <br>     
              <div class="row" style="margin: 2px;">
                <div class="col-md-12">
                  <div class="col-sm-12">
                    <div class="input-group">
                      <button type="button" (click)="selectTabOne()"  class="btn btn-primary"><i class="fa fa-arrow-circle-right"></i> Next</button>
                    </div>
                  </div>
                </div>
                
              </div>
                 </mat-tab>
              <mat-tab label="Personal Details">
                <div *ngIf="IsPerson==true">
                  <div class="row" style="margin:2px">
                    <div class="col-md-4">
                      <div class="mb-3"> 
                        <label>ID Number</label>                       
                        <input class="form-control"  [(ngModel)]="IdNo"   (keypress)="onlyNumbersAllowed($event)" 
                        [class.is-invalid]="!isValid && IdNo==0 || IdNo.length<6 || IdNo.length>10" >
                        </div>
                    </div>
                    <div class="col-md-4">
                      <div class="mb-3"> 
                        <label>NSSF Number</label>                        
                        <input class="form-control"  [(ngModel)]="NSSFNo" (keypress)="keyPressLetterandNumbers($event)"  >
                        </div>
                    </div>
                    <div class="col-md-4">
                      <div class="mb-3"> 
                        <label>Huduma Number</label>                        
                        <input class="form-control"  [(ngModel)]="HudumaNo"  (keypress)="keyPressLetterandNumbers($event)" >
                        </div>
                    </div>                    
                  </div> 
                <div class="row" style="margin:2px">
                  <div class="col-md-4">                    
                      <div class="mb-3"> 
                        <label>NHIF Number</label>                      
                        <input class="form-control" [(ngModel)]="NHIFNo"  (keypress)="keyPressLetterandNumbers($event)">
                      
                    </div>                    
                  </div>
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Gender</label>                     
                      <select class="form-control" [(ngModel)]="Gender" 
                      [class.is-invalid]="!isValid && Gender==0" >
                        <option value="0" >-select</option>
                        <option value="Male" >Male</option>
                        <option value="Female">Female</option>
                        <option  value="Others">Others</option>
                      </select>                    
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Date of Birth</label>                     
                        <input type="date"  [(ngModel)]="DOB" displayFormat="DD MM YYYY"  class="form-control">
                      </div>
                 </div>      
                </div>  
                <div class="row" style="margin:2px">
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Title</label>                      
                      <select class="form-control" [(ngModel)]="TitleId"  >
                        <option value="0">-Select</option>
                        <option *ngFor="let items of Titlelist" value="{{items.TitleId}}">{{items.TitleName}}</option>
                      </select>                      
                    </div>
                    </div>
                    <div class="col-md-4">
                      <div class="mb-3"> 
                      <label>Level of Education</label>                      
                      <select class="form-control" [(ngModel)]="LevelofEducationId"  >
                        <option value="0">-Select</option>
                        <option *ngFor="let items of EducationList" value="{{items.LevelofEducationId}}">{{items.LevelofEducationName}}</option>
                      </select>               
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Marital Status</label>                      
                      <select class="form-control" [(ngModel)]="MaritalStatusId"  >
                        <option value="0">-Select</option>
                        <option *ngFor="let item of MaritalStatusList" value="{{item.MaritalStatusId}}">{{item.MaritalStatusName}}</option>
                      </select>                     
                    </div>
                  </div>
                </div>
              </div> 
              <div *ngIf="IsPerson==false">
                <div class="row" style="margin:2px" >
                  <div class="col-md-6">
                    <div class="mb-3"> 
                      <label>Certificate Number</label>                     
                      <input class="form-control" [(ngModel)]="CompanyCertificateNo"   (keypress)="keyPressLetterandNumbers($event)" >
                      
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="mb-3"> 
                      <label>Company Registration Date</label>                      
                        <input type="date"   displayFormat="DD MM YYYY" [(ngModel)]="CompanyRegistrationDate"  class="form-control">
                      </div>                    
                  </div>
                </div>  
              </div> 
              <br>     
                <div class="row" style="margin: 2px;">
                  <div class="col-md-12">
                    <div class="mb-3">                       
                        <button type="button" (click)="selectTab(0)"  class="btn btn-danger "><i class="fa fa-arrow-circle-left"></i>Back</button>&nbsp;
                        <button type="button" (click)="selectTabTwo()" class="btn btn-primary  ml-1"><i class="fa fa-arrow-circle-right"></i> Next</button>
                      </div>                   
                  </div>
                </div>
                 </mat-tab>
              <mat-tab label="Contact Information">
                <div class="row" style="margin:2px">
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Email Address</label> 
                      <div class="input-group">                 
                        <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1">@</span>
                      </div>
                      <input class="form-control" [(ngModel)]="Email">             
                    </div>    
                    </div>
                  </div> 
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Fax Number</label>                     
                      <input class="form-control" [(ngModel)]="FaxNumber"  (keypress)="keyPressLetterandNumbers($event)"  >
                      </div>                
                  </div>  
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Cell Phone <strong style="color:red">*</strong></label>               
                        
                      <input class="form-control"  [(ngModel)]="PhoneNo" (keypress)="onlyNumbersAllowed($event)"  
                      [class.is-invalid]="!isValid && PhoneNo==254 || PhoneNo=='' || this.PhoneNo.length<10 || this.PhoneNo.length>15" >
                      </div>                    
                  </div> 
                </div>
                <div class="row" style="margin:2px">                   
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Telephone 1</label>                      
                      <input class="form-control" [(ngModel)]="Telephone1"  (keypress)="keyPressLetterandNumbers($event)"  >
                      </div>                    
                  </div> 
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Telephone 2</label>                  
                      <input class="form-control" [(ngModel)]="Telephone2"  (keypress)="keyPressLetterandNumbers($event)"  >
                      </div>                
                  </div> 
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Telephone 3</label>               
                      <input class="form-control" [(ngModel)]="Telephone3"  (keypress)="keyPressLetterandNumbers($event)" >
                      </div>                 
                  </div> 
                </div>
                <div class="row" style="margin:2px">
                  <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Postal Address</label>                      
                      <input class="form-control" [(ngModel)]="PostalAddress"  (keypress)="keyPressLetterandNumbers($event)" >
                      </div>                 
                </div>
                   <div class="col-md-4">
                    <div class="mb-3"> 
                      <label>Physical Location</label>                     
                        <textarea rows="3" class="form-control" name="comment" [(ngModel)]="PhysicalLocation"  (keypress)="keyPressLetterandNumbers($event)">
                          </textarea>
                      </div>                     
                   </div>
                   
                <div class="col-md-4">
                  <div class="mb-3"> 
                    <label>Remark</label>                     
                      <textarea rows="3" class="form-control" [(ngModel)]="Remark" placeholder="Enter your Remark/Comment">
                        </textarea>
                    </div>
                   </div>   
              </div>
              <br>
              <div class="row" style="margin: 2px;">
                <div class="col-md-12">
                  <div class="mb-3"> 
                      <button type="button" (click)="selectTab(1)"  class="btn btn-danger "><i class="fa fa-arrow-circle-left"></i>Back</button>&nbsp;
                      <button type="button" (click)="selectTabThree()" class="btn btn-primary ml-1 "><i class="fa fa-arrow-circle-right"></i> Next</button>
                  </div>                  
                </div>
              </div>               
              </mat-tab>
              <mat-tab label="Financial Information">
                <div class="row"  style="margin:2px">
                  <div class="col-md-3">
                    <div class="mb-3"> 
                      <label>Bank</label>                      
                      <select class="form-control" [(ngModel)]="BankId" (ngModelChange)="loadBranches(BankId)"  >
                        <option value="0">-Select</option>
                        <option *ngFor="let items of BankList" value="{{items.BankId}}">{{items.BankName}}</option>
                      </select>
                      </div>                    
                  </div>
                  <div class="col-md-3">
                    <div class="mb-3"> 
                      <label>Branch</label>                      
                      <select class="form-control" [(ngModel)]="BankBranchId"  
                      [class.is-invalid]="!isValid && BankBranchId==0" >
                        <option value="0">-Select</option>
                        <option *ngFor="let items of BranchList" value="{{items.BranchId}}">{{items.BranchName}}</option>
                      </select>
                      </div>                   
                  </div>
                  <div class="col-md-3">
                    <div class="mb-3"> 
                      <label>Account Number</label>                      
                      <input class="form-control" [(ngModel)]="BankAccountNo"  (keypress)="keyPressLetterandNumbers($event)" 
                      [class.is-invalid]="!isValid && BankAccountNo==''">
                      </div>
                    </div> 
                    <div class="col-md-3">
                      <div class="mb-3"> 
                      <label>Currency<strong style="color:red">*</strong></label>                    
                      <select class="form-control" [(ngModel)]="CurrencyId" >
                        <option value="0">Kenya Shillings</option>
                        <option *ngFor="let items of CurrencyList" value="{{items.CurrencyId}}">{{items.CurrencyName}}</option>
                      </select>
                      </div>
                    </div>                
                </div>
                <div class="row" style="margin:2px">
                <div class="col-md-4">
                  <div class="mb-3"> 
                    <label> KRA Pin</label>                    
                    <input class="form-control" [(ngModel)]="KRAPin"  (keypress)="keyPressLetterandNumbers($event)">
                  </div>
                </div>         
                           
                     <div class="col-sm-4">
                      <div class="mb-3"> 
                    <label> Gross Pay</label>                      
                      <input class="form-control" [(ngModel)]="GrossPay" (keypress)="onlyNumbersAllowed($event)" >
                      </div>
                    </div>
                    <div class="col-sm-4">
                      <div class="mb-3"> 
                    <label> Net Pay</label>                   
                      <input class="form-control" [(ngModel)]="NetPay" (keypress)="onlyNumbersAllowed($event)" >
                      </div>
                    </div> 
                    <div class="col-sm-3" hidden>
                    <label> Total Shares</label>
                      <div class="input-group">
                      <input class="form-control" [(ngModel)]="TotalShares" >
                      </div>
                    </div>
                    <div class="col-sm-3" hidden>
                    <label> Free Share</label>
                      <div class="input-group">
                      <input class="form-control" [(ngModel)]="FreeShare" >
                      </div>
                    </div>  
                  </div> 
              <div class="row" style="margin: 2px;">
                <div class="col-md-12">
                  <div class="col-sm-12">
                    <div class="input-group">
                      <button type="button" (click)="selectTab(2)"  class="btn btn-danger "><i class="fa fa-arrow-circle-left"></i>Back</button>&nbsp;
                      <button type="button" (click)="selectTab(5)" class="btn btn-primary ml-1 "><i class="fa fa-arrow-circle-right"></i> Next</button>
                    </div>
                  </div>
                </div>
              </div>
              </mat-tab>
              <div hidden>              
                <div class="row" style="margin:2px">                
                                
                <div class="col-md-6" hidden>
                  <div class="col-sm-12">
                    <label>Registration Code</label>
                    <div class="input-group">
                      <input hidden class="form-control"[(ngModel)]="RegistrationCode" readonly  >
                    </div>
                  </div>
                </div>
                </div>
                <div class="row" style="margin:2px" hidden>
                  <div class="col-md-6">
                    <div class="col-sm-12" hidden>
                      <label>Security Question</label>
                      <div class="input-group">
                        <select class="form-control" [(ngModel)]="SecurityQuestion" >
                          <option value="0">-Select</option>
                          <option *ngFor="let items of securityList" value="{{items.GenderId}}">{{items.GenderName}}</option>
                        </select>
                      </div>
                    </div>
                </div>
                <div class="col-md-6">
                  <div class="col-sm-12">
                    <div class="mb-3"> 
                    <label>Security Answer</label>                   
                      <input class="form-control" [(ngModel)]="SecurityAnswer"  (keypress)="keyPressLetterandNumbers($event)" > 
                    </div>
                  </div>
              </div>
                </div>
                <div class="row" style="margin:2px">
                  <div class="col-md-6">
                    <div class="mb-3"> 
                      <label></label>                      
                        <input type="checkbox" [(ngModel)]="Blocked" > &nbsp;<label>Blocked</label>
                      </div>
                     </div>                   
                   </div>                                   
                                     
                
                <input type="hidden" [(ngModel)]="IsRegister" style="width:35px;height:35px" type="hidden"> &nbsp;<label></label>
                <input type="hidden" [(ngModel)]="IsDormancy" style="width:35px;height:35px" type="hidden"  > &nbsp;<label></label>
                <div class="row" style="margin: 2px;">
                  <div class="col-md-12">
                    <div class="mb-3">                       
                        <button type="button" (click)="selectTab(3)"  class="btn btn-danger "><i class="fa fa-arrow-circle-left"></i>Back</button>&nbsp;
                        <button type="button" (click)="selectTab(5)" class="btn btn-primary ml-1 "><i class="fa fa-arrow-circle-right"></i> Next</button>
                      </div>                    
                  </div>
                </div>
              
            </div>
              
            <mat-tab label="Structure/Group">
          <div  *ngIf="insertstructure" >
          <br> 
          <br> 
            <div class="row"  style="margin:2px" >
          <div class="col-md-3">
          <select class="form-select" (change)="getLevel1($event.target.value)">
          <option value="0">Structure One</option>
          <option *ngFor = "let structure of parentList" value="{{structure.StructureValueId}}">{{structure.Name}}</option>
          </select>
          
          </div>
          
          <div class="col-md-3" *ngIf="v1">
          <select class="form-control" (change)="getLevel2($event.target.value)" >
          <option value="0">Structure Two</option>
          <option *ngFor = "let structure of structureList" value="{{structure.StructureValueId}}">{{structure.Name}}</option>
          </select>
          
          </div>
          
          <div class="col-md-3" *ngIf="v2">
          <select class="form-control" (change)="getLevel3($event.target.value)">
          <option value="0">Structure 3</option>
          <option *ngFor = "let structure of structureList1" value="{{structure.StructureValueId}}">{{structure.Name}}</option>
          
          </select>
          
          </div>
          
          <div class="col-md-3" *ngIf="v3">
          <select class="form-control" (change)="getLevel4($event.target.value)">
          <option value="0">Structure 4</option>
          <option *ngFor = "let structure of structureList2" value="{{structure.StructureValueId}}">{{structure.Name}}</option>
          </select>
          </div>
          </div>
          <br>
          <div class="row"  style="margin:2px">
            <div class="col-md-3" *ngIf="v4">
              <select class="form-control" (change)="getLevel5($event.target.value)">
              <option value="0" >Structure 5</option>
              <option *ngFor = "let structure of structureList3" value="{{structure.StructureValueId}}">{{structure.Name}}</option>
              
              </select>
              
              </div>
          </div>
          </div>
          <div *ngIf="viewExisting">
            <h3 style="text-align: right; margin-top:20px"><a  class="btn btn-outline-info" (click)="updateStructure()"><i class="fa fa-plus-square"></i> Update Structure</a></h3>
            <div class="table-responsive">
            <table class="table table-striped table-bordered hover" >
                   <thead>
                   </thead>
                   <tbody>
                    <tr *ngFor="let items of MemberStractureList">
                      <td>{{items.StructureCaption}}</td>
                      <td>{{items.CurrentName}}</td>
                    </tr>
                   </tbody>
                 </table>
                </div>
          </div>
          
          <input  type="hidden" class="form-control" [(ngModel)]="StructureId">
          <br>
          
          <div class="row" style="margin:2px">
            <div class="col-md-3">
              <button type="button" (click)="selectTab(4)"  class="btn btn-danger  ml-1"><i class="fa fa-arrow-circle-left"></i>Back</button>&nbsp;         
           
              <button type="submit" *ngIf="!loading" (click)="onsubmit(Payroll,MemberNo,FullName,SearchName,IdNo,IsPerson,NHIFNo,KRAPin,NSSFNo,HudumaNo,Email,DOB,TitleId,Gender,MaritalStatusId,Telephone1, Telephone2, Telephone3, PhoneNo, FaxNumber, PhysicalLocation, PostalAddress,MemberStatusId, Blocked, LevelofEducationId, IsRegister, IsDormancy, Remark, SecurityQuestion, RegistrationCode, NationalityId,CompanyRegistrationDate, RegistrationDate, CompanyCertificateNo, BankId, BankBranchId, BankAccountNo, CurrencyId, SecurityAnswer,StructureId,GrossPay,NetPay,TotalShares,FreeShare)" class="btn btn-primary  btn-block"><i class="fa fa-database"></i>Submit</button>
            </div>
            <div id="sa-success" *ngIf="loading" (click)="successmsg()"></div>   
          </div>
              </mat-tab>
            </mat-tab-group>
        </div>
    </div> 
      
    
    


